# VRCX

[![GitHub Workflow Status](https://github.com/vrcx-team/VRCX/actions/workflows/github_actions.yml/badge.svg)](https://github.com/vrcx-team/VRCX/actions/workflows/github_actions.yml)
[![VRCX Discord Invite](https://img.shields.io/discord/854071236363550763?color=%237289DA&logo=discord&logoColor=white)](https://vrcx.pypy.moe/discord)

VRCXはVRChatのアシスタント用アプリケーションで、フレンドに関する情報の提供や管理を行うツールです。本アプリケーションは非公式の「VRChat API SDK」を使用しています。

VRCXはVRChatによって承認されておらず、VRChatまたはVRChatの公式に関与する者の意見や見解を反映していません。VRChat及び関連する全てのプロパティはVRChat株式会社の商標または登録商標です。VRChat © VRChat株式会社

pypyとNatsumiはVRCXの使用によって発生したいかなる問題にも責任を負いません。**_自己責任でご使用ください！_**

## インストール方法

- 最新のリリースを[ダウンロード](https://github.com/vrcx-team/VRCX/releases/latest)する
- `VRCX_Setup.exe` を実行

## VRChatの利用規約に違反しますか？

**一言で言えば:** いいえ。

_VRChat Discordの #faq に記載されている、APIの使用に関する公式声明です。_
![vrchat api](https://user-images.githubusercontent.com/11171153/114227156-b559c400-99c8-11eb-9df6-ee6615b8118e.png)

# スクリーンショット
<details><summary><h2>クリックして展開</h2></summary>

### Login

![login](https://user-images.githubusercontent.com/82102170/224703139-9cb24dda-3839-4f75-a665-cca69f9e08ea.png)
![2fa](https://user-images.githubusercontent.com/82102170/224703275-103e78fd-e917-428d-b901-6817d6b59b29.png)

### Feed

![feed](https://user-images.githubusercontent.com/82102170/224714129-772d7418-034a-4fe3-aa2e-22ea71154d9a.png)

### GameLog

![gamelog](https://user-images.githubusercontent.com/82102170/224714186-75cbf46d-f7b2-4a16-bcc5-2ec06d7f4b0d.png)

### UserInfo

#### Me
![me](https://user-images.githubusercontent.com/82102170/224704240-b10aba50-29b9-4ef4-b35a-958107a32cd6.png)

#### Friend
![friend](https://user-images.githubusercontent.com/82102170/224714608-ac49621f-c28f-4266-8af8-715f4b9f2367.png)

### World

![instance](https://user-images.githubusercontent.com/82102170/224715566-67782a5e-f948-402b-b78d-1b2dd5e2382f.png)
![info](https://user-images.githubusercontent.com/82102170/224715824-c0c4220e-4f20-4799-8419-f8138de35b7a.png)

### Favorite

#### Friend
![friend](https://user-images.githubusercontent.com/82102170/224716414-5c6720bd-6d38-4e2d-9353-6bfaee47700e.png)

#### World
![world](https://user-images.githubusercontent.com/82102170/224716652-ca54f3d1-449b-43f9-81f3-7bd0833c7d9d.png)

#### Avatar
![avatar](https://user-images.githubusercontent.com/82102170/224717146-37681b38-61ef-4302-8104-212c2161dc12.png)

### FriendLog

![friendlog](https://user-images.githubusercontent.com/82102170/224717793-dbbccdfd-4f89-4597-b38e-8070549b2cf8.png)

### Moderation

![moderation](https://user-images.githubusercontent.com/82102170/224718331-87ab30b2-aae1-4bbf-9472-7279af48bd5d.png)

### Notification

![notification](https://user-images.githubusercontent.com/82102170/224718963-706e2d99-fc35-41a5-be2c-ff45681ab084.png)

### PlayerList

![image](https://user-images.githubusercontent.com/82102170/224722231-54de7848-340c-4e9d-adce-30bccb6f2e8c.png)

### Settings

#### General
![general](https://user-images.githubusercontent.com/82102170/224722538-9e320d5d-5348-4696-9a3d-720e7027b06c.png)

#### Appearance
![appearance_1](https://user-images.githubusercontent.com/82102170/224724725-8e319924-91cb-41f9-96b4-0ec438aeaa76.png)
![appearance_2](https://user-images.githubusercontent.com/82102170/224724776-002c8ac3-69f3-4d7a-877f-54faf574a6f4.png)


#### Notifications
![notif](https://user-images.githubusercontent.com/82102170/224723929-edafafd1-69d1-4367-bc1c-1097f7478dba.png)

#### Wrist Overlay
![overlay](https://user-images.githubusercontent.com/82102170/224723886-415487fa-5c99-4b07-a6ab-2c8477aa576c.png)

#### Discord Presence
![rpc_setting](https://user-images.githubusercontent.com/82102170/224724105-3e97c7a3-6aa0-414b-a363-7bae56b9b3b1.png)

#### Advanced
![advance_1](https://user-images.githubusercontent.com/82102170/224724348-84ef6fca-5a00-45db-915d-ed42d244f0ca.png)
![advance_2](https://user-images.githubusercontent.com/82102170/224724480-07618cd1-fbf5-4f1e-a85f-f7fb94e7d70f.png)


### Other

#### Join
![join](https://user-images.githubusercontent.com/82102170/224725201-8eb04169-af9c-476b-a5c5-58986d17d2e6.png)

#### Create Instance
![create](https://user-images.githubusercontent.com/82102170/224725526-7eab7b52-fec7-4c23-a941-7c4c29e8c944.png)

#### Discord Rich Presence
![rpc](https://user-images.githubusercontent.com/82102170/224725991-3fc81a3d-ca15-4dcb-a057-d713803bd666.png)

### VR Overlay(old)

![overlay1](https://user-images.githubusercontent.com/82102170/178281800-af4c69da-a0f5-43d8-9515-e960e1a16b39.png)
![overlay2](https://user-images.githubusercontent.com/82102170/178281884-ea1df88c-f16c-4c83-825c-c285f49b1ff1.png)

</details>

## テーマ

テーマをインストールするには `custom.css` を `%AppData%\VRCX` フォルダーに配置し、 `Shift+Alt+R` を押してください。

[Dark Vanilla](https://github.com/MintLily/Dark-Vanilla/tree/main/VRCX) by [MintLily](https://github.com/MintLily)
![dark-vanilla](https://user-images.githubusercontent.com/11171153/190136499-13ab2fe3-9fed-4b45-a764-e8665993d994.png)

[Pink Theme](https://github.com/kamiya10/VRCX-theme/tree/main/pink) by [Kamiya](https://github.com/kamiya10)
![pink-theme](https://user-images.githubusercontent.com/11171153/190136121-4d6ba6e5-4a04-43b2-8264-0325c858f2d8.png)

[Material 3](https://github.com/kamiya10/VRCX-theme/tree/main/m3) by [Kamiya](https://github.com/kamiya10)
![material-3](https://user-images.githubusercontent.com/11171153/190136730-65268fac-1dab-4528-813c-b4d5e5e86f7d.png)

## 起動オプション

- `--debug` Chromium DevTools付きでVRCXを起動します。
- `--config="C:\VRCX.sqlite3"` VRCXで使用するデータベースのカスタムパスを指定します。
- `--gpufix` VRCXのオーバーレイ描画用GPUをIndex 1に設定することで、セカンダリGPUに描画を強制し、また統合GPUを使用している場合は、専用GPUに描画を強制します。
- `vrcx://user/usr_id` ユーザーダイアログを開きます。
- `vrcx://avatar/avtr_id` アバターダイアログを開きます。
- `vrcx://group/grp_id` グループダイアログを開きます。
- `vrcx://world/wrld_id` ワールドダイアログを開きます。
- `vrcx://world/wrld_id:12345` インスタンス情報付きのワールドダイアログを開きます。
- `vrcx://world/https://vrch.at/0gmbxjpj` アンロックされたインスタンス情報付きのワールドダイアログを開きます。
- `vrcx://import/avatar/avtr_id,avtr_id...` お気に入りアバターのインポートダイアログを開きます。
- `vrcx://import/world/wrld_id,wrld_id...` お気に入りワールドのインポートダイアログを開きます。
- `vrcx://import/friend/usr_id,usr_id...` お気に入りフレンドのインポートダイアログを開きます。
- `vrcx://addavatardb/https://website/vrcx_search.php` リモートアバターデータベースプロバイダーのダイアログを開きます。

## ショートカットキー

- `Ctrl + Shift + I` Chromium DevToolsを開きます。
- `Ctrl + R` VRCXを再起動します。
- `Shift + Alt + R` カスタムCSSを再読み込みします。

## よくある問題

### **VRCXの動作が重い**

- 設定 > 外観> テーブルの最大数
  - この値を100ぐらいまで下げることで、RAMに保存されるエントリの量が減ります。
- 設定 > 詳細> キャッシュの自動消去
  - 間隔を3ぐらいまで下げることで、RAMに保存される不要なワールド、ユーザー、アバターの量が減ります。

### **白い画面で固まる**

この現象は、さまざまな原因で引き起こされる可能性があります:

- [Microsoft Visual C++ Redistributable 2019](https://aka.ms/vs/17/release/vc_redist.x64.exe)をインストールする。
- PCを再起動してみてください。おそらく他のプロセスがデータベースファイルを読もうとしているかもしれません。
- アンチウイルスソフトを無効化してみてください。AvastとAVGはCef/VRCXを削除してしまう可能性があります。
- AverMedia AssistCentralをアンイストールしてみてください。原因は不明ですが、VRCXに問題を起こしてしまいます。
- RAMが不安定な可能性があります。もしオーバークロックしているなら定格に戻し、MemTest86を実行してください。
- VRCXを管理者として実行してみてください。理由は不明ですが、まれに直ることがあります。
- データベースを再作成してみてください。VRCXを終了し、 `%AppData%\VRCX` を開いて、 `VRCX.sqlite3` を `Backup.sqlite3` などにリネームして現在のデータベースをバックアップします。もし以前のデータを保持したい場合は以下の手順に従ってデータベースを修復してください。

### **SteamVR オーバーレイが動かない**

- VRCXを `--gpufix` の起動オプション付きで起動してみてください。
- SteamVRのセーフモードを無効化してください。
- もし内蔵GPUを搭載しているPCを使用しているなら、[こちらの手順](https://www.windowsdigitals.com/force-chrome-firefox-game-to-use-nvidia-gpu-integrated-graphics/)に従ってみてください。

### **データベースを修復する方法**

- VRCXを終了する。
- [DB Browser for SQLite](https://sqlitebrowser.org/)をインストールする。
- ファイル > データベースを開く...
- `%AppData%\VRCX\` に移動し、 `VRCX.sqlite3` を選択する。
- ファイル > エクスポート > データベースをSQLファイルへ...
- 保存ボタンをクリックし、適当な場所にファイルを保存する。
- ファイル > データベースを閉じる
- `%AppData%\VRCX\` にある `VRCX.sqlite3` の名前を `Backup.sqlite3` などに変更する。
- ファイル > インポート > SQLからデータベースへ...
- はいを押して新しいデータベースを作成。
- `%AppData%\VRCX\` に移動し、 `VRCX.sqlite3` と名前を付けて保存。
- ファイル > 変更を書き込み
- DB Browserを閉じ、不要になった `*.sql` ファイルを削除。

## Linuxで実行する方法

[RinLovesYou](https://github.com/RinLovesYou)氏のガイドより。

- Wineをインストール

  - Arch Linux: [multilib](https://wiki.archlinux.org/title/Multilib)リポジトリを有効化し、 `sudo pacman -S wine` を実行することでインストールできます。

  - Ubuntu: [wiki](https://wiki.winehq.org/Ubuntu)を参照してください。

- Winetricks Magic

  > Wine 7.0rc5以降を使用している必要があります！それ以前のバージョンではテストしていません。Wine 7.0以降ではVRCXの動作に必要な「.NET Framework」のフルインストールが可能になりました。

  - クリーンなWine Prefixで実行します。VRCX用に新規で作成するか、`rm -rf ~/.wine`でメインのPrefixを使用します。

  - Prefix内でもVRCX.exeでも、DXVKを使用して**いない**ことを確認してください。VRCXの動作にはWineD3Dが必要です。

  - `winetricks --force -q dotnet472 corefonts` 依存関係をインストールするプロセスを静かに、かつ簡単に自動化できます。

  - `wine winecfg -v win10` Prefixで使用するWindowsのバージョンを指定します。

  - 108より新しいCEFは、現時点ではwine staging 8.4と互換性がないため、`Linux`ブランチが必要です。LinuxブランチのActionsタブにあるVRCXのArtifactをダウンロードし、展開します。

  - これで `wine VRCX.exe` が実行できるようになるはずです。CEFSharpに関するエラーが出た場合は`wine VRCX.exe -no-cef-sandbox`を試してみてください。

- メモ

  - Linux上でのVRCXはメモリリークが発生することが知られています。メモリ使用量に注意するか、あるいはこまめに再起動するようにしてください。

  - Intel iGPU + NVIDIA GPUのノートパソコンを使用している場合は`nvidia-settings`でグラフィックデバイスをNVIDIA GPUに強制する必要があります。

  ![image](https://camo.githubusercontent.com/ed672a01defae989c4bf5963c0cc9db973b42203e1e5e927f3341c6a9115beb8/68747470733a2f2f63646e2e646973636f72646170702e636f6d2f6174746163686d656e74732f3835343037313233363336333535303736362f3933353531333532313839373233343435322f756e6b6e6f776e2e706e67)

## ソースコードからビルドする方法

- ソースコードを入手

  - 最新の[zip](https://github.com/vrcx-team/VRCX/archive/master.zip)をダウンロードするか、`git clone`でクローンする。

- .NETでビルド

  - [Visual Studio](https://visualstudio.microsoft.com/)をインストールする。
  - Visual Studioを起動し、「プロジェクトやソリューションを開く」をクリックし、ソースコード内の[ソリューション ファイル](https://docs.microsoft.com/en-us/visualstudio/extensibility/internals/solution-dot-sln-file)を開く。
  - [ビルド構成](https://docs.microsoft.com/en-us/visualstudio/ide/understanding-build-configurations?view=vs-2019)から`Debug`を`Release`に変更し、プラットフォームを`x64`に変更する。
  - [NuGet](https://docs.microsoft.com/en-us/nuget/consume-packages/package-restore#restore-packages-automatically-using-visual-studio)パッケージを復元する。
  - ソリューションを[ビルド](https://docs.microsoft.com/en-us/visualstudio/ide/building-and-cleaning-projects-and-solutions-in-visual-studio)する。

- Node.jsでビルド

  - [Node.js](https://nodejs.org/en/download/)をダウンロードし、インストールする。
  - `build-node.js.cmd`を実行する。
  - `make-junction.cmd`を実行する。

- リリース用zipを作成
  - [Bandizip](https://www.bandisoft.com/bandizip)用の`make-zip.cmd`または[7-Zip](https://www.7-zip.org)用の`make-zip-7z.cmd`を実行する。